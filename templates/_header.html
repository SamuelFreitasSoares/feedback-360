{% load static %}
<div class="header">
    <p class="logo"><em>Inatel</em></p>

    <div class="links">
        {% if user_type == 'admin' %}
            <a href="{% url 'home' %}" {% if request.resolver_match.url_name == 'home' %}class="active"{% endif %}>Home</a>
            <a href="{% url 'admin_dashboard' %}" {% if request.resolver_match.url_name == 'admin_dashboard' %}class="active"{% endif %}>Dashboard</a>
            <a href="{% url 'admin_users' %}" {% if request.resolver_match.url_name == 'admin_users' or request.resolver_match.url_name == 'admin_create_user' or request.resolver_match.url_name == 'admin_edit_user' %}class="active"{% endif %}>Usuários</a>
            <a href="{% url 'admin_courses' %}" {% if request.resolver_match.url_name == 'admin_courses' %}class="active"{% endif %}>Cursos</a>
            <a href="{% url 'admin_disciplines' %}" {% if request.resolver_match.url_name == 'admin_disciplines' %}class="active"{% endif %}>Disciplinas</a>
            <a href="{% url 'admin_classes' %}" {% if request.resolver_match.url_name == 'admin_classes' %}class="active"{% endif %}>Turmas</a>
            <a href="{% url 'admin_semesters' %}" {% if request.resolver_match.url_name == 'admin_semesters' %}class="active"{% endif %}>Semestres</a>
            <a href="{% url 'admin_import_users' %}" {% if request.resolver_match.url_name == 'admin_import_users' %}class="active"{% endif %}>Importar</a>
            <a href="{% url 'logout' %}">Sair</a>
        {% else %}
            {% if user_type %}
                <a href="{% url 'home' %}" {% if request.resolver_match.url_name == 'home' %}class="active"{% endif %}>Home</a>
                <a href="{% url 'atividades' %}" {% if request.resolver_match.url_name == 'atividades' or request.resolver_match.url_name == 'atividade_detalhe' or request.resolver_match.url_name == 'criar_atividade' or request.resolver_match.url_name == 'criar_grupo' or request.resolver_match.url_name == 'avaliar_colega' %}class="active"{% endif %}>Atividades</a>
                <a href="{% url 'notas' %}" {% if request.resolver_match.url_name == 'notas' %}class="active"{% endif %}>Notas</a>
                <a href="{% url 'disciplinas' %}" {% if request.resolver_match.url_name == 'disciplinas' or request.resolver_match.url_name == 'disciplina_detalhe' %}class="active"{% endif %}>Disciplinas</a>
                <a href="{% url 'perfil' %}" {% if request.resolver_match.url_name == 'perfil' %}class="active"{% endif %}>Perfil</a>

                <!-- Dropdown de notificações -->
                <div class="dropdown d-inline">
                    <a href="#" class="notification-icon p-2" id="notificationDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-bell"></i>
                        {% if notificacoes_count > 0 %}
                            <span class="notification-count">{{ notificacoes_count }}</span>
                        {% endif %}
                    </a>
                    <div class="dropdown-menu dropdown-menu-right notification-dropdown" aria-labelledby="notificationDropdown">
                        <div class="notification-header">
                            <span><strong>Notificações</strong></span>
                            <a href="{% url 'notificacoes' %}" class="small">Ver todas</a>
                        </div>
                        <div class="notification-body">
                            {% if notificacoes_nao_lidas %}
                                {% for notificacao in notificacoes_nao_lidas|slice:":5" %}
                                    <a href="{% if notificacao.link %}{{ notificacao.link }}{% else %}{% url 'marcar_notificacao_como_lida' notificacao.id %}{% endif %}" class="dropdown-item notification-item unread">
                                        {% if notificacao.tipo == 'info' %}
                                            <span class="text-info"><i class="fas fa-info-circle"></i></span>
                                        {% elif notificacao.tipo == 'warning' %}
                                            <span class="text-warning"><i class="fas fa-exclamation-triangle"></i></span>
                                        {% elif notificacao.tipo == 'success' %}
                                            <span class="text-success"><i class="fas fa-check-circle"></i></span>
                                        {% elif notificacao.tipo == 'danger' %}
                                            <span class="text-danger"><i class="fas fa-times-circle"></i></span>
                                        {% endif %}
                                        <div class="notification-title">{{ notificacao.titulo }}</div>
                                        <div class="notification-message">{{ notificacao.mensagem|truncatechars:50 }}</div>
                                        <div class="notification-time">{{ notificacao.data_criacao|date:"d/m/Y H:i" }}</div>
                                    </a>
                                {% endfor %}
                            {% else %}
                                <div class="dropdown-item notification-item text-center">
                                    <p class="text-muted my-2">Não há notificações novas</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <a href="{% url 'logout' %}">Sair</a>
            {% else %}
                <a href="{% url 'login' %}">Login</a>
            {% endif %}
        {% endif %}
    </div>
</div>